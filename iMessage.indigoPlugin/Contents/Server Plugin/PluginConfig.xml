<?xml version="1.0"?>
<PluginConfig>
  <Field id="infoLabel0" type="label" fontSize='large' fontColor="black">
    <Label>iMessage Plugin</Label>
  </Field>

  <Field id="space0" type="label" fontColor="black" >
    <Label>Developed by: GlennNZ</Label>
  </Field>
  <Field id="sep7" type="separator"/>
  <Field id="space200" type="label" fontColor="black" >
    <Label>Allowed Buddy List</Label>
  </Field>
  <Field id="sep7aa" type="separator"/>
  <Field id="space2001" type="label" fontSize="small" fontColor="black">
    <Label>A comma separated list of buddys allowed to communicate with iMsg</Label>
  </Field>
  <Field id="allowedBuddies" type="textfield" alighwithControl="true" defaultValue="" alignText="left" tooltip="Allowed buddies to communicate with service [comma separated]">
    <Label>Buddy List:</Label>
  </Field>
    <Field id="spaced2" type="label" fontSize="small" alighwithControl="true" fontColor="black">
    <Label>If this is enabled Indigo will Highlight in Log the Buddy Handle Msg received from. Use this if any issues working out correct Buddy Handle</Label>
  </Field>

    <Field id="showBuddies" type="checkbox" tooltip="Highlight Buddy Handles.">
    <Label>Show Buddy Handle in Log:</Label>
    <Description>Enable/Disable</Description>
  </Field>
    <Field id="saveVariable" type="checkbox" tooltip="Save all messages to Variable.">
    <Label>Save incoming Messages to Indigo Variable:</Label>
    <Description>Enable/Disable</Description>
  </Field>
     <Field id="sepnewone9" type="separator"/>
  <Field id="spacenewone120" type="label" alignText="left">
    <Label>ChatGPT AI:</Label>
  </Field>
    <Field id="usechatgpt" type="checkbox" defaultValue="false" tooltip="Enabling will use ChatGPT.">
        <Label/>
        <Description>Use ChatGPT Processing:</Description>
    </Field>
      <Field id="allowed_chatGPTBuddies" type="textfield" alighwithControl="true" defaultValue="" alignText="left" tooltip="Allowed buddies to communicate with service [comma separated]">
    <Label>ChatGPT Allowed Buddy List:</Label>
  </Field>

       <Field id="chatgpt_access_token" type="textfield" defaultValue="" tooltip="chatgpt Access Token" dynamicreload="true" visibleBindingId="usechatgpt" visibleBindingValue="true" >
    <Label>OpenAI ChatGPT Access Token:</Label>
  </Field>

    <Field id="use_davinci" type="checkbox" defaultValue="false" tooltip="Enabling will use davinci.">
        <Label/>
        <Description>Use Text-Davinci Engine (if disabled will use gpt-3.5-turbo):</Description>
    </Field>
    <Field id="chatgpt_alldevices" defaultValue="false" hidden="True" type="checkbox" tooltip="Enabling will send all devices to ChatGPT." visibleBindingId="usechatgpt" visibleBindingValue="true">
        <Label/>
        <Description>Use all Indigo Devices: (not really recommended)</Description>
    </Field>
        <Field id="chatgpt_deviceControl" defaultValue="false" type="checkbox" tooltip="Enabling will enable control of devices." visibleBindingId="usechatgpt" visibleBindingValue="true">
        <Label>Enable below to attempt to use device control with ChatGPT.
            Need to setup devices to be controlled by edit notes fields as below.</Label>
        <Description>Attempt to control Devices:</Description>
    </Field>

          <Field id="spacenewone2ae3" type="label" fontSize="small" fontColor="black" visibleBindingId="usechatgpt" visibleBindingValue="true" >
    <Label>
        For devices to be setup, the below needs to be added to each devices Notes page in Indigo.
        Followed by Synonyms:
        eg.        chatgpt|Main Light|Main Lamp|Living Room Main Lamp
    </Label>
          </Field>

			<Field id="save" type="button"  alignWithControl="true" fontSize="large" fontColor="red" >
				<Label>Click Here to (re)Generate chatGPT Devices: </Label>
				<Title>Generate Devices</Title>
				<CallbackMethod>generate</CallbackMethod>
			</Field>
   <Field id="location_Data" type="textfield" defaultValue="" tooltip="chatgpt Access Token" dynamicreload="true" visibleBindingId="usechatgpt" visibleBindingValue="true" >
    <Label>Additional Personal Data for ChatGPT:</Label>


  </Field>
       <Field id="buddy_chatgpt" type="textfield" defaultValue="" tooltip="chatgpt Access Token" dynamicreload="true" visibleBindingId="usechatgpt" visibleBindingValue="true" >
    <Label>Data for each Buddy for ChatGPT:</Label>


  </Field>
    <Field id="spaceanewone2ae3" type="label" fontSize="small" fontColor="black" visibleBindingId="usechatgpt" visibleBindingValue="true" >
    <Label>
        Data to inform ChatGPT regarding specific buddys it may be conversing wife.  Set as specific system setup, can alter personality or nature of replies for each buddy
        eg.        buddyname|Bob.  Interested in Building and Trucks|buddyname2|Wife of Bob
    </Label>
          </Field>
 <Field id="sep9" type="separator"/>
  <Field id="space120" type="label" alignText="left">
    <Label>Wit.Ai AI:</Label>
  </Field>

          <Field id="configInfo" justify='left' type="textfield" hidden='true' >
          </Field>
            <Field id="InfogenerateApp" alignwithControl='true' justify='left' type="label" fontColor="red" visibleBindingId="configInfo" visibleBindingValue="generate">
            <Label>         Generating a Wit.Ai Application....  </Label>
            </Field>
              <Field id="errGenerate" justify='left' type="label" fontColor="red" visibleBindingId="configInfo" visibleBindingValue="errGenerateExists">
            <Label>         Error Generating a Wit.Ai Application. It already Exists. Delete First.</Label>
            </Field>
                  <Field id="generateSucess" justify='left' type="label" fontColor="red" visibleBindingId="configInfo" visibleBindingValue="createsuccess">
            <Label>         Successfully Generated a Wit.Ai Application....</Label>
            </Field>
              <Field id="updating" justify='left' type="label" fontColor="red" visibleBindingId="configInfo" visibleBindingValue="update">
            <Label>         Updating Wit.Ai App this might take some time and you can close dialog.</Label>
            </Field>
              <Field id="updateComplete" justify='left' type="label" fontColor="red" visibleBindingId="configInfo" visibleBindingValue="upComplete">
            <Label>         Updating Wit.Ai App Completed Successfully.</Label>
            </Field>
                   <Field id="deleting" justify='left' type="label" fontColor="red" visibleBindingId="configInfo" visibleBindingValue="delete">
            <Label>         Deleting Wit.Ai App ....</Label>
            </Field>
            <Field id="delComplete" justify='left' type="label" fontColor="red" visibleBindingId="configInfo" visibleBindingValue="delsuccess">
            <Label>         Successfully deleted Wit.Ai App ....</Label>
            </Field>
                 <Field id="deleteerror" justify='left' type="label" fontColor="red" visibleBindingId="configInfo" visibleBindingValue="delexists">
            <Label>         Error Deleting Wit.Ai App. It doesn't seem to Exist....</Label>
            </Field>
                     <Field id="deleteerror2" justify='left' type="label" fontColor="red" visibleBindingId="configInfo" visibleBindingValue="delerr">
            <Label>         Error Deleting Wit.Ai App.  Perhaps try again?.</Label>
            </Field>

          <Field id="refreshCallbackMethod" type='textfield' hidden='true' defaultValue="UIrefreshMethod">
          </Field>

<Field id="usewit_Ai" type="checkbox" defaultValue="false" tooltip="Enabling will use Wit_Ai.">
        <Label/>
        <Description>Use Wit.Ai Processing:</Description>
    </Field>

    <Field id="wit_alldevices" type="checkbox" tooltip="Enabling will send all devices to Wit.ai." visibleBindingId="usewit_Ai" visibleBindingValue="true">
        <Label/>
        <Description>Use all Indigo Devices:</Description>
    </Field>F
          <Field id="space2ae3" type="label" fontSize="small" fontColor="black" visibleBindingId="usewit_Ai" visibleBindingValue="true" >
    <Label>
        Enabling this will send ALL indigo devices to Wit.Ai App
        Disabling will only send those you have indicated with witai in Notes
        Followed by Synonyms:
        eg.        witai|Main Light|Main Lamp|Living Room Main Lamp
    </Label>
          </Field>
   <Field id="access_token" type="textfield" defaultValue="" tooltip="Witopia Access Token" dynamicreload="true" visibleBindingId="usewit_Ai" visibleBindingValue="true" >
    <Label>Access Token:</Label>
  </Field>
      <Field id="generateWitAIApp"
				   type="button"
				   tooltip="Click on this button to Generate Wit.Ai Data / Application" visibleBindingId="usewit_Ai" visibleBindingValue="true">
				<Label>Generate Wit.AI App</Label>
				<Title>Generate Wit.AI App</Title>
				<CallbackMethod>wit_ThreadCreate</CallbackMethod>
      </Field>

    <Field id="space2ae" type="label" fontSize="small" fontColor="black" visibleBindingId="usewit_Ai" visibleBindingValue="true" >
    <Label>
        This will use the Access Token above to create a new Indigo iMessage Wit.Ai App.
        This new App - will have a new access token and the below field should change to reflect that
        This will take at least 5-10 minutes to finish and possibility longer.
        (the wit.ai app also takes a while to finish thinking about your information provided)

        It will run in a seperate thread.        Once Complete - Indigo log will let you know
    </Label>
  </Field>

     <Field id="sep921" type="separator" visibleBindingId="usewit_Ai" visibleBindingValue="true" />
  <Field id="space1a20" type="label" alignText="left" visibleBindingId="usewit_Ai" visibleBindingValue="true">
    <Label>Wit.Ai Update:</Label>
  </Field>

       <Field id="updatewitDevices"
				   type="button"
				   tooltip="Click on this button to Update all Wit.Ai Devices/Synonyms" visibleBindingId="usewit_Ai" visibleBindingValue="true">
				<Label>Update Wit.AI App</Label>
				<Title>Update Wit.AI App</Title>
				<CallbackMethod>wit_ThreadUpdateApp</CallbackMethod>
       </Field>

    <Field id="space2221ae" type="label" fontSize="small" fontColor="black" visibleBindingId="usewit_Ai" visibleBindingValue="true">
    <Label>
         This will send any new information to wit.ai.  Click this if have updated the devices
         you wish to control/use and have updated the Note device field with
         witai|synomyns for devices
    </Label>
    </Field>
 <Field id="sepa29" type="separator" visibleBindingId="usewit_Ai" visibleBindingValue="true"/>
    <Field id="space1ba20" type="label" alignText="left" visibleBindingId="usewit_Ai" visibleBindingValue="true">
    <Label>Wit.Ai Delete:</Label>
  </Field>

    <Field id="main_access_token" type="textfield" fontColor="black" tooltip="Witopia Access Token NEW" dynamicReload="true" readonly="true" visibleBindingId="usewit_Ai" visibleBindingValue="true" >
    <Label>New App Access Token:</Label>
  </Field>




   <Field id="app_id" type="textfield" tooltip="Witopia App Id Token NEW" fontColor="black" readonly="true" dynamicReload="true" visibleBindingId="usewit_Ai" visibleBindingValue="true" >
    <Label>App_ID:</Label>
  </Field>
    <Field id="deletewitApp"
				   type="button"
				   tooltip="Click on this button to Delete all Wit.Ai Data / Application" visibleBindingId="usewit_Ai" visibleBindingValue="true">
				<Label>Delete Wit.AI App</Label>
				<Title>Delete Wit.AI App</Title>
				<CallbackMethod>wit_Delete</CallbackMethod>
      </Field>


    <Field id="space2aaeae" type="label" fontSize="small" fontColor="black" visibleBindingId="usewit_Ai" visibleBindingValue="true">
    <Label>
        This will completely, irreversibly delete the wit.ai App
        Do this if wish to start again, prior to pressing the Generate New App button
        (ideally this should not be used)

    </Label>
   </Field>


 <Field id="sep12139" type="separator"/>

  <Field id="space10" type="label" alignText="left">
    <Label>Debugging:</Label>
  </Field>

  <Field id="sep4" type="separator"/>

  <Field id="space11" type="label" fontSize="small">
    <Label>Turn on debugging only when needed. Be careful when posting the output to the forums or other public places as it could expose sensitive information.</Label>
  </Field>

    <Field id="debugextra" type="checkbox" tooltip="Enabling will Debug Logging.">
        <Label/>
        <Description>Debug Extra 1</Description>
    </Field>
    <Field id="debugtriggers" type="checkbox" tooltip="Debug Triggers">
        <Label/>
        <Description>Debug Triggers</Description>
    </Field>
    <Field id="debugexceptions" type="checkbox" tooltip="">
        <Label/>
        <Description>Debug Exceptions</Description>
    </Field>
    <Field id="showDebugLevel" type="menu" defaultValue="20" tooltip="Controls the amount of debug information written to the log.">
        <Label>Debug level:</Label>
        <Description>Level of Debug information to show in Indigo</Description>
        <List>
            <Option value="5">Detailed Debugging Messages</Option>
            <Option value="10">Debugging Messages</Option>
            <Option value="20">Informational Messages</Option>
            <Option value="30">Warning Messages</Option>
            <Option value="40">Error Messages</Option>
            <Option value="50">Critical Errors Only</Option>
        </List>

  </Field>


</PluginConfig>
